<!DOCTYPE html>
<html>
<head>
  <title>HotLogo @ WebMSX</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" type="image/x-icon" href="https://github.com/arkanon/arkanon.github.io/blob/master/favicon.ico?raw=true">

  <base href="https://rawgit.com/ppeccin/WebMSX/master/src/main/">

<!--
  <script src="../../release/stable/4.0/embedded/wmsx.js"></script>
-->

  <script src="room/screen/FullScreenSetup.js"></script>
  <script src="WMSX.js"></script>
  <script src="room/screen/FullScreenSetup.js"></script>
  <script src="util/Util.js"></script>
  <script src="util/SHA1.js"></script>
  <script src="util/ZIP.js"></script>
  <script src="util/EmbeddedFiles.js"></script>
  <script src="util/MultiDownloader.js"></script>
  <script src="util/MultiFileReader.js"></script>
  <script src="msx/cpu/Z80.js"></script>
  <script src="msx/ppi/PPI.js"></script>
  <script src="msx/video/VDP.js"></script>
  <script src="msx/video/VDPCommandProcessor.js"></script>
  <script src="msx/video/VideoSignal.js"></script>
  <script src="msx/video/VideoStandard.js"></script>
  <script src="msx/audio/PSG.js"></script>
  <script src="msx/audio/AudioSignal.js"></script>
  <script src="msx/audio/PSGAudio.js"></script>
  <script src="msx/audio/PCM8BitAudio.js"></script>
  <script src="msx/audio/SCCIAudio.js"></script>
  <script src="msx/audio/YM2413Tables.js"></script>
  <script src="msx/audio/YM2413Audio.js"></script>
  <script src="msx/miscdevices/RTC.js"></script>
  <script src="msx/miscdevices/SystemFlags.js"></script>
  <script src="msx/miscdevices/ImageCassetteDriver.js"></script>
  <script src="msx/miscdevices/TurboDriver.js"></script>
  <script src="msx/miscdevices/BIOSKeyboardExtension.js"></script>
  <script src="msx/miscdevices/ImageDiskDriver.js"></script>
  <script src="msx/miscdevices/ImageNextorDeviceDriver.js"></script>
  <script src="msx/rom/ROM.js"></script>
  <script src="msx/rom/ROMDatabase.js"></script>
  <script src="msx/slots/SlotCreator.js"></script>
  <script src="msx/slots/SlotFormats.js"></script>
  <script src="msx/slots/Slot.js"></script>
  <script src="msx/slots/SlotEmpty.js"></script>
  <script src="msx/slots/SlotExpanded.js"></script>
  <script src="msx/slots/SlotExpandedSpecial.js"></script>
  <script src="msx/slots/SlotNormal.js"></script>
  <script src="msx/slots/ram/SlotRAM64K.js"></script>
  <script src="msx/slots/ram/SlotRAMMapper.js"></script>
  <script src="msx/slots/bios/SlotBIOS.js"></script>
  <script src="msx/slots/bios/SlotMSX2BIOSExt.js"></script>
  <script src="msx/slots/cartridges/CartridgeASCII8K.js"></script>
  <script src="msx/slots/cartridges/CartridgeASCII16K.js"></script>
  <script src="msx/slots/cartridges/CartridgeKonami.js"></script>
  <script src="msx/slots/cartridges/CartridgeRType.js"></script>
  <script src="msx/slots/cartridges/CartridgeCrossBlaim.js"></script>
  <script src="msx/slots/cartridges/CartridgeDOS2.js"></script>
  <script src="msx/slots/cartridges/CartridgeHarryFox.js"></script>
  <script src="msx/slots/cartridges/CartridgeAlQuran.js"></script>
  <script src="msx/slots/cartridges/CartridgeSuperSwangi.js"></script>
  <script src="msx/slots/cartridges/CartridgeZemina80.js"></script>
  <script src="msx/slots/cartridges/CartridgeZemina90.js"></script>
  <script src="msx/slots/cartridges/CartridgeZemina126.js"></script>
  <script src="msx/slots/cartridges/CartridgeSuperLodeRunner.js"></script>
  <script src="msx/slots/cartridges/CartridgeDooly.js"></script>
  <script src="msx/slots/cartridges/special/disk/CartridgeDiskPatched.js"></script>
  <script src="msx/slots/cartridges/special/disk/CartridgeNextorPatched.js"></script>
  <script src="msx/slots/cartridges/special/scc/CartridgeKonamiSCC.js"></script>
  <script src="msx/slots/cartridges/special/scc/CartridgeSCCExpansion.js"></script>
  <script src="msx/slots/cartridges/special/scc/CartridgeSCCIExpansion.js"></script>
  <script src="msx/slots/cartridges/special/scc/CartridgeManbow2.js"></script>
  <script src="msx/slots/cartridges/special/kanji/CartridgeKanjiFont.js"></script>
  <script src="msx/slots/cartridges/special/sram/CartridgePAC.js"></script>
  <script src="msx/slots/cartridges/special/msx-music/CartridgeMSXMUSIC.js"></script>
  <script src="msx/slots/cartridges/special/msx-music/CartridgeFMPAC.js"></script>
  <script src="msx/slots/cartridges/special/sram/CartridgeGameMaster2.js"></script>
  <script src="msx/slots/cartridges/special/sram/CartridgeASCII8KSRAM.js"></script>
  <script src="msx/slots/cartridges/special/sram/CartridgeASCII16KSRAM.js"></script>
  <script src="msx/slots/cartridges/special/sram/CartridgeHalnote.js"></script>
  <script src="msx/slots/cartridges/special/pcm/CartridgeMajutsushi.js"></script>
  <script src="msx/slots/cartridges/special/pcm/CartridgeSynthesizer.js"></script>
  <script src="msx/machine/MachineTypeSocket.js"></script>
  <script src="msx/machine/ExtensionsSocket.js"></script>
  <script src="msx/machine/DeviceMissing.js"></script>
  <script src="msx/machine/BUS.js"></script>
  <script src="msx/machine/Machine.js"></script>
  <script src="msx/controls/KeyboardKeys.js"></script>
  <script src="msx/controls/JoystickButtons.js"></script>
  <script src="msx/controls/MachineControls.js"></script>
  <script src="images/Images.js"></script>
  <script src="userprefs/UserPreferences.js"></script>
  <script src="userprefs/UserROMFormats.js"></script>
  <script src="room/clock/Clock.js"></script>
  <script src="room/files/FileLoader.js"></script>
  <script src="room/files/FileDownloader.js"></script>
  <script src="room/controls/DOMKeys.js"></script>
  <script src="room/controls/GamepadButtons.js"></script>
  <script src="room/controls/TouchControls.js"></script>
  <script src="room/controls/BuiltInKeyboards.js"></script>
  <script src="room/controls/DOMKeyboard.js"></script>
  <script src="room/controls/GamepadJoysticksControls.js"></script>
  <script src="room/controls/DOMJoykeysControls.js"></script>
  <script src="room/controls/DOMMouseControls.js"></script>
  <script src="room/controls/DOMTouchControls.js"></script>
  <script src="room/controls/ControllersHub.js"></script>
  <script src="room/controls/DOMMachineControls.js"></script>
  <script src="room/controls/DOMVirtualKeyboard.js"></script>
  <script src="room/screen/es6/ScreenGUI.js"></script>
  <script src="room/screen/virtualkeyboard/VirtualKeyboard.js"></script>
  <script src="room/screen/Monitor.js"></script>
  <script src="room/screen/CanvasDisplay.js"></script>
  <script src="room/screen/es6/SettingsGUI.js"></script>
  <script src="room/screen/settings/ControlMappingPopup.js"></script>
  <script src="room/screen/settings/KeyboardConfigurator.js"></script>
  <script src="room/screen/settings/PortsConfigurator.js"></script>
  <script src="room/screen/settings/Settings.js"></script>
  <script src="room/screen/dialogs/PasteDialog.js"></script>
  <script src="room/screen/dialogs/TextEntryDialog.js"></script>
  <script src="room/screen/dialogs/SaveStateDialog.js"></script>
  <script src="room/screen/dialogs/CartridgeFormatDialog.js"></script>
  <script src="room/screen/dialogs/DiskSelectDialog.js"></script>
  <script src="room/screen/dialogs/NewHardDiskDialog.js"></script>
  <script src="room/screen/dialogs/MachineSelectDialog.js"></script>
  <script src="room/screen/dialogs/TouchConfigDialog.js"></script>
  <script src="room/screen/dialogs/QuickOptionsDialog.js"></script>
  <script src="room/screen/dialogs/NetPlayDialog.js"></script>
  <script src="room/speaker/WebAudioSpeaker.js"></script>
  <script src="room/savestate/SaveStateMedia.js"></script>
  <script src="room/savestate/LocalStoragePersistence.js"></script>
  <script src="room/savestate/IndexedDBPersistence.js"></script>
  <script src="room/cartridge/FileCartridgeSlot.js"></script>
  <script src="room/cassette/FileCassetteDeck.js"></script>
  <script src="room/disk/DiskImages.js"></script>
  <script src="room/disk/FileDiskDrive.js"></script>
  <script src="room/controls/PeripheralControls.js"></script>
  <script src="room/controls/DOMPeripheralControls.js"></script>
  <script src="room/netplay/NetServer.js"></script>
  <script src="room/netplay/NetClient.js"></script>
  <script src="room/Room.js"></script>
  <script src="../runtime/images/EmbeddedImages.js"></script>
  <script src="../runtime/sysfiles/CompressedSystemFiles.js"></script>
  <script src="../runtime/sysfiles/EmbeddedSystemFiles.js"></script>
  <script src="Configurator.js"></script>
  <script src="Launcher.js"></script>

  <script>



    snippet = {
                'def' : 'preto no branco'

              , 'ocr'             : '\nmudecor 15 1\nmudecf 15\nmudect 1\n\nesc proporção\n\n\n\n\n\nesc " esc [ã â é í ó ú ç º π] esc "'
              , 'atat'            : 'atat todas mudecf 1 tat cada [ mudect 1+resto quem 10 mudecl quem pd quem*12 at pf 80\natt cada [ mudecf quem espere 50'
              , 'proporção'       : 'mudect 6\nmudecl 4\nesc proporção\n\nrepita 360 [ pf 1 pe 1 ]\nmudeproporção 1\nrepita 360 [ pf 1 pd 1 ]\n'
              , 'preto no branco' : 'mudecor 15 1 mudecf 15 mudect 1 mudecl 1 att'
              }

    sysrom  = {
                'def' : 'MSX1'

              , 'MSX1'   : '@MSX1_NTSC.bios'
              , 'HotBit' : 'http://msxarchive.msxinfo.net/mirrors/mep/BIOS ROMs/hotbit12.zip'
              , 'Expert' : 'http://msxarchive.msxinfo.net/mirrors/mep/BIOS ROMs/expert11.zip'
              , 'MSX2+'  : '@MSX2P_NTSC.bios'
              }

    approm  = {
                'def' : 'MSX-Logo (pt) (Hot-Logo)'

              , 'MSX-Logo (pt) (Hot-Logo)'     : 'http://msxblog.es/wp-content/uploads/2009/09/msxlogo_por.zip'
              , 'MSX-BASIC'                    : '@[MSXDOS2]v22.rom'
              , ''                             : ''
              , 'Arkanoid'                     : 'http://romsmania.com/statics/data/MSX Computer/A-C/Arkanoid.zip'
              , 'Arkanoid II - Revenge of Doh' : 'http://romsmania.com/statics/data/MSX 2/Arkanoid II - Revenge of Doh (Japan).zip' // msx2
              , 'H.E.R.O'                      : 'http://romsmania.com/statics/data/MSX Computer/G-K/Hero.zip'
              , 'Iligks Episode I - Theseus'   : 'http://romsmania.com/statics/data/MSX Computer/P-T/Thseus.zip'
              , 'PayLoad'                      : 'http://romsmania.com/statics/data/MSX Computer/P-T/Payload.zip'
              , 'Road Fighter'                 : 'http://romsmania.com/statics/data/MSX Computer/P-T/Road Fighter.zip'
              , 'Snake-It'                     : 'http://romsmania.com/statics/data/MSX Computer/P-T/Snake-It.zip'
              }

    floppy  = {
                'def' : 'Projetos Hot-Logo'

              , 'MSX-DOS 1'         : '@DOS1Boot.zip'
              , 'Projetos Hot-Logo' : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-disk.zip'
              , 'UZIX 1'            : 'http://uzix.sourceforge.net/uzix1.0/files/uzix1.0.zip'     // msx2
              , 'UZIX 1 Apps'       : 'http://uzix.sourceforge.net/uzix1.0/files/uzix1.0appl.zip' // msx2
              , 'UZIX 2'            : 'http://uzix.sourceforge.net/uzix2.0/files/uzix0.2.0.zip'   // msx2
              , 'Aquarela 1/2'      : 'http://msx2.org/MSX TOSEC (2009-09-27)/MSX/Various/[DSK]/Aquarela (1989)(Paulisoft Informatica)(pt)(Disk 1 of 2).zip'
              , 'Aquarela 2/2'      : 'http://msx2.org/MSX TOSEC (2009-09-27)/MSX/Various/[DSK]/Aquarela (1989)(Paulisoft Informatica)(pt)(Disk 2 of 2).zip'
              , 'Graphos III'       : 'http://msx2.org/MSX TOSEC (2009-09-27)/MSX/Various/[DSK]/Graphos III (1987)(ATI Editora)(pt)[a].zip'
              , 'Graphos III Pro'   : 'http://msx2.org/MSX TOSEC (2009-09-27)/MSX/Various/[DSK]/Graphos III Pro (1989)(ProKit)(pt)[a].zip'
              , 'MSX-Word'          : 'http://msx2.org/MSX TOSEC (2009-09-27)/MSX/Various/[DSK]/MSX-Word v3.0 (1988)(Cibertron Software)(pt).zip'
              }

    savstat = {
                'def' : 'Hot-Logo'

              , 'Hot-Logo' : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-hotlogo.wst'
 	      , 'Hugo'     : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-hotlogo-hugo.wst'
 	      , 'Bamba'    : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-hotlogo-bamba.wst'
	      , 'Tio Iri'  : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-hotlogo-tioiri.wst'
	      , 'Parabéns' : 'https://rawgit.com/arkanon/dipohlo/gh-pages/webmsx-hotlogo-parabens.wst'
              }

    proxy   = { /* Cross-Origin Resource Sharing free proxies */
                'def' : 'CORSify Me'

              , 'none'          : ''
              , 'CORS Anywhere' : 'https://cors-anywhere.herokuapp.com/'
              , 'CORSify Me'    : 'http://www.corsify.me/'
              , 'CORS Now'      : 'https://cors.now.sh/'
              , 'Cross Origin'  : 'http://crossorigin.me/'
              , 'Thing Proxy'   : 'https://thingproxy.freeboard.io/fetch/'
              }

    charmap = {
                'ã' : '±'
              , 'â' : ''
              , 'é' : ''
              , 'í' : '¡'
              , 'ó' : '¢'
              , 'ú' : '£'
              , 'ç' : ''
              , 'º' : '§'
              , 'π' : '¾'
              }

    dt = new Date()



 // wmsx.Images.urls.sprites   = "../runtime/images/files/sprites.png"

 // WMSX.MACHINE               = sysrom.def.charAt(3) == '2' ? 'MSX2PA' : 'MSX1A'
 // WMSX.TOUCH_MODE            = 1
    WMSX.SCREEN_ELEMENT_ID     = 'wmsx-scr'
    WMSX.AUTO_START            = false
    WMSX.SPEED                 = 1000
    WMSX.CPU_TURBO_MODE        = 8
    WMSX.VDP_TURBO_MODE        = 9
    WMSX.AUTO_POWER_ON_DELAY   = 0
    WMSX.SCREEN_CONTROL_BAR    = 1
    WMSX.SCREEN_DEFAULT_ASPECT = 1.0
    WMSX.SCREEN_DEFAULT_SCALE  = 1.5
    WMSX.SCREEN_FILTER_MODE    = 0 // 1
    WMSX.SPRITES_DEBUG_MODE    = 1

 // WMSX.CARTRIDGE1_URL        = curl(sysrom)
 // WMSX.CARTRIDGE2_URL        = curl(approm)
 // WMSX.DISKA_FILES_URL       = curl(floppy)
 // WMSX.STATE_URL             = curl(savstat)

 // WMSX.BASIC_ENTER           = tr('dt arquivos')
 // WMSX.BASIC_ENTER           = tr(snippet[snippet.def])
 // WMSX.BASIC_TYPE            =



    function curl  (db)      { var url = typeof db === 'object' ? db[db.def] : db; return url.charAt(0) == '@' ? url : encodeURI(proxy[proxy.def]+url) }
    function load  (db,port) { port=port||0; WMSX.room.fileLoader.readFromURL(curl(db), wmsx.FileLoader.OPEN_TYPE.AUTO, port) }
    function ktype (cmd)     { WMSX.room.keyboard.typeString(tr(cmd)) }
    function wait  (ms,cmd)  { setTimeout( function(){ ktype(cmd) }, ms ) }

    function tr(str)
    {
      var re = new RegExp( '['+Object.keys(charmap).join('')+']', 'g' )
      return str.replace( re, function(m) { return charmap[m] } )
    }


    window.onload = function(e)
    {

      WMSX.start()
      WMSX.room.machine.setMachine( sysrom.def.charAt(3) == '2' ? 'MSX2PA' : 'MSX1A' )
      load(sysrom)
      load(approm)

      load(floppy)
      ktype('dt arquivos\n')
      ktype('carregue "mru\n')

   // load(floppy['UZIX 2'])
   // load(floppy['UZIX 1 Apps'], 1)
   // wait( 7000, 'root\nmount /dev/fd1 /mnt\nls /mnt\n/mnt/cal ' + dt.getFullYear() + ' ' + (dt.getMonth()+1) + '\n' )

   // load(floppy['Aquarela 1/2'])
   // load(floppy['Aquarela 2/2'], 1)

   // load(floppy['Graphos III'])
   // ktype('\n\nload "graphos.bas\nrun\n')

   // load(floppy['Graphos III Pro'])

   // load(floppy['MSX-Word'])

   // load(savstat)
   // load(savstat['Hugo'])

/*
      var funct  = wmsx.MultiDownloader
      var entire = funct.toString()
      var body   = entire.slice(entire.indexOf("{") + 1, entire.lastIndexOf("}"))
      console.log(body)
*/

    }



    console.log(WMSX)
    console.log( 'CARTRIDGE_1__URL = ' + WMSX.CARTRIDGE1_URL  )
    console.log( 'CARTRIDGE_2__URL = ' + WMSX.CARTRIDGE2_URL  )
    console.log( 'DISK_A_FILES_URL = ' + WMSX.DISKA_FILES_URL )
    console.log( 'STATE________URL = ' + WMSX.STATE_URL       )
    console.log( 'BASIC______ENTER = ' + WMSX.BASIC_ENTER     )

  </script>

  <style>

    html,
    body
    {
      width: 100%;
      height: 100%;
    }

    body
    {
      margin: 0;
      background: #292929;
    }

    #table
    {
      display: table;
      width: 100%;
      height: 100%;
    }

    #cell
    {
      display: table-cell;
      text-align: center;
      vertical-align: middle;
    }

    #wmsx-scr,
    #wmsx-bar
    {
      border: 0 !important;
    }

  </style>

</head>

<body>

  <div id="table">
    <div id="cell">
      <div id="wmsx-scr"></div>
    </div>
  </div>

</body>

</html>
